import{n as e,cz as a,br as l,a3 as t,a2 as n,cC as o,aw as s,ai as r,cZ as i,a7 as c,c as d,o as u,M as p,b as m,bO as x,H as v,w as f,a5 as h,d as b,t as g,aa as y,ak as w,a as k,S as C,J as $,cU as _,ac as T,at as I,F as B,a8 as A,aJ as N,K as R,aM as U,cA as V,aP as j,R as M,T as D,a6 as z,aL as E,bY as S,fL as W,fM as q,aN as F,d3 as J,bz as K,_ as L}from"./C8zCCogY.js";import{E as O,a as G}from"./C-cIFx6x.js";import"./Dwz_iTym.js";import"./pAvqTbq1.js";import{c as H}from"./cC-N3AwG.js";import P from"./DWhJicC0.js";import"./2xvRo4QC.js";const Q={key:0,class:"table-empty"},Y={key:1},Z={key:1,class:"flex-start"},X=["src"],ee={key:0,class:"border-solid border-0.5px border-#286dff color-#286dff rounded-4px text-10px px-4px py-1px overflow-hidden text-ellipsis whitespace-nowrap max-w-100px ml-10px line-height-15px"},ae=["onMouseenter"],le={key:0,class:"mr-5px"},te={key:1,class:"bg-[--primary-color] rounded-4px text-10px px-4px py-3px overflow-hidden text-ellipsis whitespace-nowrap max-w-100px line-height-19px height-19px"},ne={key:2,class:"bg-[--signal-green] rounded-4px text-10px px-4px py-3px overflow-hidden text-ellipsis whitespace-nowrap max-w-100px line-height-19px height-19px"},oe=["onClick"],se={class:"font-500 text-12px"},re={key:2},ie={class:"flex-between"},ce={class:"text-24px"},de={class:"w-480px flex flex-col items-center justify-center mb-20px"},ue={class:"text-14px color-[--secondary-text] mt-26px"},pe={class:"color-[--primary-color] mr-4px text-17px"},me={class:"mt-26px color-[--main-text] text-14px block"},xe={class:"flex-between"},ve={class:"text-20px font-500"},fe={class:"flex flex-col items-start"},he={class:"text-14px color-[--secondary-text] mb-16px"},be={class:"px-10px py-10px text-14px"},ge={class:"color-[var(--third-text)] text-left text-12px"},ye={class:"color-[var(--main-text)] text-left pl-5px"},we={key:1},ke={class:"color-[var(--third-text)] text-left text-12px"},Ce={class:"color-[var(--main-text)] text-left pl-5px"},$e={class:"color-[var(--main-text)] text-left pl-5px"},_e={class:"color-[var(--main-text)] text-left pl-5px"},Te=L(e({__name:"list",props:{tableData:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1}},emits:["refresh","getMultiWalletsAllChain"],setup(e,{emit:L}){var Te,Ie;const Be=null==(Te=a())?void 0:Te.parent,Ae=null==(Ie=null==Be?void 0:Be.exposed)?void 0:Ie.getMultiWalletsAllChain,{getUserInfo:Ne}=l(),Re=L,{token_logo_url:Ue,mode:Ve}=t(n()),{theme:je}=t(o()),{t:Me}=s(),De=r(),{evmAddress:ze}=t(l()),Ee=I(!1),Se=B(!1),We=B(""),qe=B(null),Fe=B(null),Je=I(!1),Ke=I(0),Le=B(null),{authInfo:Oe}=t(i()),Ge=B({buttonRefs:{},currentBtnRef:{}});function He(e){S.confirm(Me("walletRemoveTip2"),Me("walletRemove"),{type:"warning",icon:W(q),confirmButtonText:Me("confirm"),cancelButtonText:Me("cancel"),customClass:`${Ve.value} delete_confirm`}).then(()=>{var a;(null==(a=Oe.value)?void 0:a.authSetting)?function(e){Se.value=!0,We.value="",qe.value=e}(e):S.confirm(Me("googleAuthNotBoundTip"),Me("bindGoogleAuth"),{type:"warning",icon:W(q),confirmButtonText:Me("goToBind"),cancelButtonText:Me("cancel"),customClass:`${Ve.value} delete_confirm`}).then(()=>{De.push("/safe")})}).catch(e=>{})}function Pe(){var e,a,l,t;if(!We.value||6!==We.value.length)return void F.error(Me("authCodeError"));const n=(null==(t=null==(l=null==(a=null==(e=qe.value)?void 0:e.balancesInfo)?void 0:a.filter(e=>"bsc"==e.chain))?void 0:l[0])?void 0:t.address)||"";H(n,We.value).then(()=>{F.success(Me("success")),Se.value=!1,We.value="",Re("refresh"),Ne()}).catch(e=>{F.error((null==e?void 0:e.message)||Me("fail"))})}function Qe(e){Fe.value=e,Ee.value=!0,setTimeout(()=>{!async function(){var e,a;const l=document.getElementById("qr-chain-canvas-code");if(!l)return;J.toCanvas({canvas:l,content:(null==(e=Fe.value)?void 0:e.address)||"",width:200,nodeQrCodeOptions:{margin:2},logo:{src:`${Ue.value}chain/${(null==(a=Fe.value)?void 0:a.chain)||"bsc"}.png`,logoRadius:8}}).catch(e=>{})}()},200)}function Ye(e){if(e.isChildren){const a=De.resolve({path:`/address/${e.address}/${e.chain}`});window.open(a.href,"_blank")}}const Ze=({row:e})=>e.isChildren?"cursor-pointer":"";return(a,l)=>{const t=N,n=y,o=O,s=G,r=V,i=j,I=D,B=E,F=c("copy"),J=x;return u(),d("div",null,[p((u(),v(s,{data:e.tableData,style:{width:"100%"},"row-key":"id","tree-props":{children:"balancesInfo",hasChildren:"hasChildren"},"default-expand-all":!1,class:"table-list hidden-scrollbar bot-manage-table","header-row-class-name":"text-12px sticky top-0 z-10 font-500","row-class-name":Ze,onRowClick:Ye},{empty:f(()=>{var a;return[e.loading||0!=(null==(a=e.tableData)?void 0:a.length)?(u(),d("span",Y)):(u(),d("div",Q,[m(t)]))]}),default:f(()=>[m(o,{prop:"name",label:a.$t("wallet"),"min-width":200},{default:f(({row:e})=>{var t,o;return[e.isChildren?(u(),d(h,{key:0},[b(g(null==(o=null==(t=e.name)?void 0:t.replace)?void 0:o.call(t,new RegExp("(.{6})(.+)(.{4})"),"$1...$3"))+" ",1),p(m(n,{name:"bxs:copy",class:"ml-5px mb--1px clickable color-[--third-text]",onClick:l[0]||(l[0]=w(()=>{},["stop"]))},null,512),[[F,e.address]])],64)):(u(),d("div",Z,[k("img",{class:"mr-8px",style:{"border-radius":"50%"},height:"24",src:("generateAvatarIcon"in a?a.generateAvatarIcon:$(_))((null==e?void 0:e.name)||""),alt:""},null,8,X),b(" "+g(e.name)+" ",1),m(P,{remark:e.remark,address:e.evmAddress,chain:"bsc",showAddress:!0,onRefresh:l[1]||(l[1]=e=>Re("refresh"))},null,8,["remark","address"]),$(ze)==e.evmAddress?(u(),d("span",ee,g(a.$t("currentWallet")),1)):C("",!0)]))]}),_:1},8,["label"]),m(o,{prop:"chain",label:a.$t("chain"),align:"right"},{default:f(({row:e})=>{var l;return[b(g(null==(l=("getChainInfo"in a?a.getChainInfo:$(T))(null==e?void 0:e.chain))?void 0:l.name),1)]}),_:1},8,["label"]),m(o,{prop:"balance",label:a.$t("balance1"),align:"right"},{default:f(({row:e,$index:t})=>[k("div",{ref:e=>$(Ge).currentBtnRef[t]=e,onMouseenter:a=>function(e,a){var l,t,n;Je.value=!0,Ke.value=a,Le.value={...e},(null==(l=Le.value)?void 0:l.balancesInfo)&&(Le.value.balancesInfo=null==(n=null==(t=Le.value)?void 0:t.balancesInfo)?void 0:n.reduce((e,a)=>{if(["eth","base"].includes(a.chain)){const l=e.find(e=>"eth"===e.chain);l?l.mainTokenBalance=new K(l.mainTokenBalance).plus(a.mainTokenBalance).toFixed():e.push({...a,chain:"eth"})}else e.push(a);return e},[]))}(e,t),onMouseleave:l[2]||(l[2]=e=>Je.value=!1)}," $"+g(("formatNumber"in a?a.formatNumber:$(A))((null==e?void 0:e.balance)||0,2)),41,ae)]),_:1},8,["label"]),m(o,{prop:"source",label:a.$t("origin"),align:"right"},{default:f(({row:e})=>[(null==e?void 0:e.isChildren)?C("",!0):(u(),d(h,{key:0},[e.source?(u(),d("span",le,g(e.source),1)):C("",!0),1==e.genSource?(u(),d("span",te,g(a.$t("import")),1)):(u(),d("span",ne,g(a.$t("create")),1))],64))]),_:1},8,["label"]),m(o,{label:a.$t("operate"),align:"right"},{default:f(({row:e})=>["delete"==e.operate&&$(ze)!==e.evmAddress?(u(),v(n,{key:0,class:"text-14px text-[--third-text] cursor-pointer hover:color-[--main-text]",name:"ic:baseline-delete",onClick:w(a=>async function(e){Ae&&(await Ae(),Number(null==e?void 0:e.balance)>0?S.confirm(Me("walletRemoveTip1"),Me("walletRemove"),{type:"warning",icon:W(q),confirmButtonText:Me("confirm"),cancelButtonText:Me("cancel"),customClass:`${Ve.value} delete_confirm`}).then(()=>{He(e)}):He(e))}(e),["stop","prevent"])},null,8,["onClick"])):(null==e?void 0:e.isChildren)?(u(),d("div",{key:1,class:"bg-[--main-input-button-bg] rounded-4px inline-flex items-center gap-4px py-2px px-4px cursor-pointer",onClick:w(a=>Qe(e),["stop","prevent"])},[m(n,{name:"custom:download",class:"text-10px"}),k("span",se,g($(Me)("deposit2")),1)],8,oe)):(u(),d("span",re))]),_:1},8,["label"])]),_:1},8,["data"])),[[J,e.loading]]),m(r,{modelValue:$(Ee),"onUpdate:modelValue":l[4]||(l[4]=e=>U(Ee)?Ee.value=e:null),width:"500",class:R([$(je)]),centered:!0,"append-to-body":"","close-on-click-modal":!1,"popper-style":{padding:"20px","border-radius":"8px"},"show-close":!1,"destroy-on-close":""},{header:f(()=>[k("div",ie,[k("span",ce,g(a.$t("deposit2")),1),m(n,{name:"material-symbols-light:close",class:"text-30px cursor-pointer",onClick:l[3]||(l[3]=w(e=>Ee.value=!1,["stop","prevent"]))})])]),default:f(()=>{var e,t,n;return[k("div",de,[l[9]||(l[9]=k("canvas",{id:"qr-chain-canvas-code"},null,-1)),k("div",ue,[k("span",pe,g(null==(t=("getChainInfo"in a?a.getChainInfo:$(T))((null==(e=$(Fe))?void 0:e.chain)||""))?void 0:t.name),1),b(g(a.$t("walletAddress")),1)]),k("span",me,g(null==(n=$(Fe))?void 0:n.address),1)])]}),_:1},8,["modelValue","class"]),m(r,{modelValue:$(Se),"onUpdate:modelValue":l[7]||(l[7]=e=>U(Se)?Se.value=e:null),width:"480","align-center":"","close-on-click-modal":!1,"show-close":!1,"destroy-on-close":"","append-to-body":""},{header:f(()=>[k("div",xe,[k("span",ve,g(a.$t("DbCheckTitle2")),1),m(n,{name:"material-symbols-light:close",class:"text-30px cursor-pointer",onClick:l[5]||(l[5]=w(e=>Se.value=!1,["stop","prevent"]))})])]),default:f(()=>[k("div",fe,[k("div",he,g(a.$t("authCode")),1),m(i,{modelValue:$(We),"onUpdate:modelValue":l[6]||(l[6]=e=>U(We)?We.value=e:null),placeholder:a.$t("authCodeError"),autofocus:"",maxlength:"6",class:"mb-24px",size:"large",onKeyup:M(Pe,["enter"])},null,8,["modelValue","placeholder"]),m(I,{type:"primary",size:"large",class:"w-full",onClick:Pe},{default:f(()=>[b(g(a.$t("confirm")),1)]),_:1})])]),_:1},8,["modelValue"]),m(B,{visible:$(Je),"onUpdate:visible":l[8]||(l[8]=e=>U(Je)?Je.value=e:null),persistent:!1,"virtual-ref":$(Ge).currentBtnRef[$(Ke)],"virtual-triggering":"",trigger:"contextmenu",placement:"right","popper-class":"text-center","popper-style":{padding:0,"border-radius":"8px"}},{default:f(()=>{var e,t,n,o,s,r,i;return[k("table",be,[k("tbody",null,[(null==(e=$(Le))?void 0:e.balancesInfo)?(u(!0),d(h,{key:0},z(null==(t=$(Le))?void 0:t.balancesInfo,(e,l)=>{var t;return u(),d("tr",{key:l},[k("td",ge,g(null==(t=("getChainInfo"in a?a.getChainInfo:$(T))((null==e?void 0:e.chain)||""))?void 0:t.main_name),1),k("td",ye,g(("formatNumber"in a?a.formatNumber:$(A))((null==e?void 0:e.mainTokenBalance)||0,2)),1)])}),128)):(u(),d("tr",we,[k("td",ke,g((null==(o=("getChainInfo"in a?a.getChainInfo:$(T))((null==(n=$(Le))?void 0:n.chain)||""))?void 0:o.main_name)||a.$t("mainToken")),1),k("td",Ce,g(("formatNumber"in a?a.formatNumber:$(A))((null==(s=$(Le))?void 0:s.mainTokenBalance)||0,2)),1)])),k("tr",null,[l[10]||(l[10]=k("td",{class:"color-[var(--third-text)] text-left text-12px"},"USDT",-1)),k("td",$e,g(("formatNumber"in a?a.formatNumber:$(A))((null==(r=$(Le))?void 0:r.usdtTokenBalance)||0,2)),1)]),k("tr",null,[l[11]||(l[11]=k("td",{class:"color-[var(--third-text)] text-left text-12px"},"USDC",-1)),k("td",_e,g(("formatNumber"in a?a.formatNumber:$(A))((null==(i=$(Le))?void 0:i.usdcTokenBalance)||0,2)),1)])])])]}),_:1},8,["visible","virtual-ref"])])}}}),[["__scopeId","data-v-fee84070"]]);export{Te as default};
