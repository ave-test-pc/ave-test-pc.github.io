import{bi as a,b0 as t,U as e,V as s,ad as o,a3 as n,f as r,v as c,g as i,c as l,o as u,O as p,a as d,ap as m,K as f,w as g,b as v,J as b,t as x,H as y,d as h,i as _,aR as k,b9 as w,bL as C,ok as $,ol as F,b8 as G,bN as B,_ as T}from"./C0VmCwYl.js";import{E as j,a as D}from"./B4HE3f45.js";import"./zxXvcpOJ.js";import"./zMOKQAqQ.js";import{E as A}from"./BJABrzbO.js";import"./BfdQ9pQL.js";function E(r="add"){const{$i18n:c}=a();return new Promise(((i,l)=>{t.prompt("",c.t("enterGroupName"),{confirmButtonText:c.t("confirm1"),cancelButtonText:c.t("cancel"),inputValidator:a=>a?!((null==a?void 0:a.length)>20)||(l(),c.t("maximum10characters")):(l(),c.t("enterGroupName"))}).then((({value:t})=>{"add"===r?function(t,r,c){const{evmAddress:i}=e(),{address:l}=s(),{$i18n:u}=a(),p=A.service();o(t,i||l).then((()=>{n.success(u.t("success")),r(!0)})).catch((a=>{n.error(u.t("fail")),c()})).finally((()=>{p.close()}))}(t,i,l):i(t)}))}))}const N={class:"w-full px-5px [&&]:text-12px"},z=["onClick"],V=["onClick"],I=T(r({__name:"dialogGroupManage",props:{list:{type:Array,default:()=>[]},getData:{type:Function,default:()=>{}},loading:Boolean},setup(a){const{t:o}=c(),r=e(),T=s(),A=i((()=>r.evmAddress||T.address)),I=C(B.FAV_DIALOG),L=a,H=i((()=>L.list.slice(1)));async function M(a){const{value:e}=await t.prompt("",o("enterRemark"),{confirmButtonText:o("confirm1"),cancelButtonText:o("cancel"),inputValidator:a=>a?!((null==a?void 0:a.length)>20)||o("maximum10characters"):o("cannotBeEmpty")});!async function(a,t){try{await w(a,t,A.value),n.success(o("success")),L.getData(),I.emit({type:"changeFavoriteGroupName"})}catch(e){}}(e,a.group_id)}async function O(a,t,e){const s=a.group_id,r=t+e;if(r<0||r+1>H.value.length)return;const c=H.value[r].group_id;try{await F(s,c,A.value),n.success(o("success")),L.getData()}catch(i){n.error(o("fail"))}}async function R(){await E(),L.getData(),I.emit({type:"changeFavoriteGroupName"})}return(e,s)=>{const r=k,c=j,i=y,w=D,C=m;return u(),l("div",N,[p((u(),f(w,{data:_(H),height:"325px",class:"[--el-font-size-base:12px] table-fav-group"},{empty:g((()=>[v(r)])),default:g((()=>[v(c,{label:e.$t("groupName"),prop:"name"},null,8,["label"]),v(c,{label:e.$t("rename"),align:"center"},{default:g((({row:a})=>[d("span",{class:"cursor-pointer",onClick:b((t=>M(a)),["stop","prevent"])},x(e.$t("edit")),9,z)])),_:1},8,["label"]),v(c,{prop:"name",label:e.$t("sort"),align:"center"},{default:g((({row:a,$index:t})=>[v(i,{size:"large",link:"",disabled:0===t,onClick:b((e=>async function(a,t){if(0!==t)try{await $(a.group_id,A.value),n.success(o("success")),L.getData()}catch(e){n.error(o("fail"))}}(a,t)),["stop"])},{default:g((()=>[h(x(e.$t("top")),1)])),_:2},1032,["disabled","onClick"]),v(i,{link:"",size:"large",disabled:0===t,onClick:b((e=>O(a,t,-1)),["stop"])},{default:g((()=>[h(x(e.$t("up")),1)])),_:2},1032,["disabled","onClick"]),v(i,{link:"",size:"large",disabled:t+1===_(H).length,onClick:b((e=>O(a,t,1)),["stop"])},{default:g((()=>[h(x(e.$t("down")),1)])),_:2},1032,["disabled","onClick"])])),_:1},8,["label"]),v(c,{label:e.$t("operate"),align:"center"},{default:g((({row:a})=>[d("span",{class:"cursor-pointer",onClick:b((e=>async function(a){await t.confirm(o("removeFavGroupTips"),o("tips"),{confirmButtonText:o("confirm"),cancelButtonText:o("cancel"),dangerouslyUseHTMLString:!0,customClass:""});try{await G(a.group_id,A.value),n.success(o("success")),L.getData(),I.emit({type:"removeFavoriteGroup",groupId:a.group_id})}catch(e){}}(a)),["stop","prevent"])},x(e.$t("delete")),9,V)])),_:1},8,["label"])])),_:1},8,["data"])),[[C,a.loading]]),d("span",{class:"mt-20px cursor-pointer px-26px py-12px text-14px font-500 radius-6px block text-center color-[--main-text] bg-[--d-3F80F7-l-EAECEF] hover:opacity-80",onClick:R},x(_(o)("newGroup")),1)])}}}),[["__scopeId","data-v-59356406"]]);export{I as default};
