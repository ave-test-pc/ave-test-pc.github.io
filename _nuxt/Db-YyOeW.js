import{f as e,aB as r,I as a,r as t,y as s,g as n,m as l,aD as i,al as o,oc as u,c as d,o as c,b as v,i as m,bS as p,v as f,ci as b,od as _,a as A,O as h,t as y,ap as k,K as T,w as g,B as j,F as N,D as x,J as $,d as w,C,aJ as F,a0 as S,a5 as L,aL as O,aM as R,aR as K,s as U,aT as I,a3 as J,_ as V,d1 as B}from"./C0VmCwYl.js";import{L as D,s as H,d as M}from"./MK9a4Muk.js";import{E as q}from"./zMOKQAqQ.js";import"./BvQ8kGpd.js";import"./C0O8vvG5.js";import"./C6Y8sTuD.js";import"./DpxIxQTC.js";import"./D2KqFhI7.js";import"./C8VmjICj.js";import"./zxXvcpOJ.js";import"./4hQHbeZj.js";import"./CJ5C3yTe.js";import"./BfdQ9pQL.js";import"./D6OzSheD.js";import"./CyDNo-31.js";import"./oYLRChA3.js";import"./Bn0Mo5PC.js";import"./-_IRfLaa.js";import"./B4HE3f45.js";import"./rhYgSr0o.js";import"./DxTPb_Mm.js";import"./CMghWc-o.js";import"./D6hHWCBQ.js";import"./DSDI11qA.js";import"./CIMJ110g.js";const E=e({__name:"index",props:{currentActiveTab:{type:String,default:"Transactions"}},setup(e){const p=e,f=r(),b=a(!1),_=a(!0),A=t([]),h=a({sort_by:"",order:""}),y=a(""),k=a(""),T=a(""),g=t([]),j=s(),N=n((()=>{var e;return null==(e=f.params)?void 0:e.id})),x=n((()=>{const e=T.value?g.value||[]:A.value||[];return y.value?"sol"==k.value?(null==e?void 0:e.filter((e=>e.sol_first_transfer_in_from==y.value)))||[]:(null==e?void 0:e.filter((e=>e.token_first_transfer_in_from==y.value)))||[]:e||[]}));function $(e){if(!i().currentAddress)return;const r={sort_by:null==e?void 0:e.sort_by,order:null==e?void 0:e.order},a={token_id:N.value,self_address:i().currentAddress,...r};h.value=r,b.value=!0,u(a).then((e=>{const r=(null==e?void 0:e.holderStats)||[];A.value=r||[]})).catch((()=>{A.value=[]})).finally((()=>{b.value=!1}))}function w(e){var r;$({sort_by:e.prop,order:null==(r=e.order)?void 0:r.replace("ending","")})}function C(e){if(T.value=e||"",!T.value)return void $(h.value);const r={token_id:N.value,self_address:i().currentAddress,keyword:T.value};b.value=!0,H(r).then((e=>{g.value=Array.isArray(e)?e:[]})).catch((()=>{g.value=[]})).finally((()=>{b.value=!1}))}function F(e){y.value?(y.value="",k.value=""):(y.value=e.address||"",k.value=e.type||"")}return l((()=>j.headFollowsNum.all),(()=>{"Attention"==p.currentActiveTab&&$()})),l(N,(()=>{"Attention"==p.currentActiveTab&&$()})),l((()=>i().currentAddress),(e=>{e?"Attention"==p.currentActiveTab&&$():A.value=[]})),o((()=>{"Attention"==p.currentActiveTab&&$()})),(e,r)=>(c(),d("div",null,[v(D,{ref:"holdersRef",tableList:m(x),loading:m(b),searchOriginKeyword:m(y),searchOriginType:m(k),isAttention:m(_),onHandleSortChange:w,onFilterAddress:C,onFilterOriginAddress:F},null,8,["tableList","loading","searchOriginKeyword","searchOriginType","isAttention"])]))}}),P={class:"histrory"},Z={class:"top"},z={key:0,class:"content"},G=["onClick"],Q=V(e({__name:"index",props:{currentActiveTab:{type:String,default:"Transactions"}},setup(e){const u=e,V=p(),{t:B}=f(),D=r(),H=a(!1),E=t([]),Q=n((()=>{var e;return null==(e=D.params)?void 0:e.id})),W=s(),X=a(!1),Y=t(),ee=n((()=>V.token)),re=n((()=>{var e;const r=b(D.params.id);return(null==r?void 0:r.chain)||(null==(e=ee.value)?void 0:e.chain)||""})),ae=n((()=>Math.max(V.commonHeight-150,450)));function te(){if(!i().currentAddress)return;const e={token_id:Q.value,address:i().currentAddress};H.value=!0,_(e).then((e=>{E.value=e||[]})).finally((()=>{H.value=!1}))}return l((()=>W.headFollowsNum.all),(()=>{"Attention"==u.currentActiveTab&&te()})),l(Q,(()=>{"Attention"==u.currentActiveTab&&te()})),l((()=>i().currentAddress),(e=>{e?"Attention"==u.currentActiveTab&&te():E.value=[]})),o((()=>{"Attention"==u.currentActiveTab&&te()})),(e,r)=>{const a=C,t=F,s=K,n=q,l=k;return c(),d("div",P,[A("div",Z,[A("span",null,y(e.$t("address")),1),A("span",null,y(e.$t("remark")),1),A("span",null,y(e.$t("buy")),1),A("span",null,y(e.$t("sell")),1),A("span",null,y(e.$t("Txs"))+" ("+y(e.$t("buy1"))+")",1),A("span",null,y(e.$t("Txs"))+" ("+y(e.$t("sell1"))+")",1),A("span",null,y(e.$t("currentPosition")),1),A("span",null,y(e.$t("balance")),1),A("span",null,y(e.$t("profit")),1)]),h((c(),T(n,{height:m(ae)},{default:g((()=>{var n;return[m(E).length>0?(c(),d("ul",z,[(c(!0),d(N,null,x(m(E),((s,n)=>{var l;return c(),d("li",{key:n,class:"flex",onClick:$((e=>function(e){var r;X.value=!0,null==(r=Y.value)||r.getUserTxs(e.address)}({address:s.user_address})),["stop"])},[A("span",null,[v(a,{ref_for:!0,ref:"attentionTriggerRef",name:"custom:attention",class:"h-16px w-16px clickable shrink-0 color-[#F45469] align-middle",onClick:$((e=>function(e,r){const a={address:i().currentAddress,user_address:e.user_address,user_chain:re.value};I(a).then((()=>{var e;W.getFollowsNum(),J.success(B("attention1Canceled")),null==(e=E.value)||e.splice(r,1)})).catch((e=>{})).finally((()=>{}))}(s,n)),["stop","prevent"])},null,8,["onClick"]),w(" *"+y(null==(l=s.user_address)?void 0:l.slice(-6)),1)]),A("div",{class:"flex-end",onClick:r[0]||(r[0]=$((()=>{}),["stop","prevent"]))},[v(t,{addressClass:"token-symbol ellipsis",addressStyle:"max-width: 70px",showAddressTitle:"",address:s.user_address,chain:m(re),remark:s.remark,onUpdateRemark:({remark:e})=>s.remark=e},null,8,["address","chain","remark","onUpdateRemark"])]),A("div",null,y(("formatNumber"in e?e.formatNumber:m(S))(s.bug_amount||0,2)),1),A("div",null,y(("formatNumber"in e?e.formatNumber:m(S))(s.sell_amount||0,2)),1),A("span",null,y(("formatNumber"in e?e.formatNumber:m(S))(s.bug_count||0,0)),1),A("span",null,y(("formatNumber"in e?e.formatNumber:m(S))(s.sell_count||0,0)),1),A("span",null,y(("formatNumber"in e?e.formatNumber:m(S))(s.current_position||0,2)),1),A("span",null,"$"+y(("formatNumber"in e?e.formatNumber:m(S))(s.position_value||0,2)),1),A("div",null,[A("span",{class:"value",style:L({color:s.profit>=0?m(O)[0]:m(R)[0]})}," $"+y(("formatNumber"in e?e.formatNumber:m(S))(s.profit||0,2)),5)])],8,G)})),128))])):j("",!0),m(E)&&0!==(null==(n=m(E))?void 0:n.length)||m(H)?j("",!0):(c(),T(s,{key:1,class:"mt-200px"}))]})),_:1},8,["height"])),[[l,m(H)]]),v(M,{ref_key:"profitLossRef1",ref:Y,modelValue:m(X),"onUpdate:modelValue":r[1]||(r[1]=e=>U(X)?X.value=e:null)},null,8,["modelValue"])])}}}),[["__scopeId","data-v-bb7a359a"]]),W=e({__name:"index",props:{currentActiveTab:{type:String,default:"Transactions"}},setup(e){const a=e,t=r(),s=p(),l=n((()=>{var e;const r=b(t.params.id);return(null==r?void 0:r.chain)||(null==(e=s.token)?void 0:e.chain)||""}));return(e,r)=>m(B).includes(m(l))?(c(),T(E,{key:0,currentActiveTab:a.currentActiveTab},null,8,["currentActiveTab"])):(c(),T(Q,{key:1,currentActiveTab:a.currentActiveTab},null,8,["currentActiveTab"]))}});export{W as default};
