import{g as e,gw as a,k as t,n as l,dz as s,gI as n,q as o,D as r,G as u,gV as i,F as d,cd as v,c,S as b,E as p,o as f,L as m,K as h,J as g,gG as y,nE as x,nF as w,nG as P,aS as $,gC as C,bK as N,at as R,b as k,N as E,hZ as S,hU as T,Q as B,Z as F,$ as V,i as A,gx as j,hs as L,al as K,gF as _,U as z,cz as M,a0 as W,gW as G,aj as I,nH as O,M as U,P as q,a1 as H,h7 as Z}from"./C8zCCogY.js";import{u as D,c as J}from"./DUtGqHLY.js";import{c as Q}from"./DHI12vUc.js";import{r as X}from"./2xvRo4QC.js";import{c as Y}from"./Ch2kKm0h.js";const ee=Symbol("tabsRootContextKey"),ae=e({tabs:{type:t(Array),default:()=>a([])},tabRefs:{type:t(Object),default:()=>a({})}}),te="ElTabBar";var le=l({name:te,__name:"tab-bar",props:ae,setup(e,{expose:a}){const t=e,l=s(ee);l||n(te,"<el-tabs><el-tab-bar /></el-tabs>");const x=o("tabs"),w=d(),P=d(),$=p(()=>{var e;return y(l.props.defaultValue)||Boolean(null==(e=P.value)?void 0:e.transform)}),C=()=>P.value=(()=>{let e=0,a=0;const s=["top","bottom"].includes(l.props.tabPosition)?"width":"height",n="width"===s?"x":"y",o="x"===n?"left":"top";return t.tabs.every(l=>{if(y(l.paneName))return!1;const n=t.tabRefs[l.paneName];if(!n)return!1;if(!l.active)return!0;e=n[`offset${Q(o)}`],a=n[`client${Q(s)}`];const r=window.getComputedStyle(n);return"width"===s&&(a-=Number.parseFloat(r.paddingLeft)+Number.parseFloat(r.paddingRight),e+=Number.parseFloat(r.paddingLeft)),!1}),{[s]:`${a}px`,transform:`translate${Q(n)}(${e}px)`}})(),N=[];r(()=>t.tabs,async()=>{await u(),C(),N.forEach(e=>e.stop()),N.length=0,Object.values(t.tabRefs).forEach(e=>{N.push(i(e,C))})},{immediate:!0});const R=i(w,()=>C());return v(()=>{N.forEach(e=>e.stop()),N.length=0,R.stop()}),a({ref:w,update:C}),(e,a)=>$.value?(f(),c("div",{key:0,ref_key:"barRef",ref:w,class:h([g(x).e("active-bar"),g(x).is(g(l).props.tabPosition)]),style:m(P.value)},null,6)):b("v-if",!0)}});const se=e({panes:{type:t(Array),default:()=>a([])},currentName:{type:[String,Number],default:""},editable:Boolean,type:{type:String,values:["card","border-card",""],default:""},stretch:Boolean,tabindex:{type:[String,Number],default:void 0}}),ne="ElTabNav",oe=l({name:ne,props:se,emits:{tabClick:(e,a,t)=>t instanceof Event,tabRemove:(e,a)=>a instanceof Event},setup(e,{expose:a,emit:t}){const l=s(ee);l||n(ne,"<el-tabs><tab-nav /></el-tabs>");const v=o("tabs"),c=x(),b=w(),f=d(),m=d(),h=d(),g=d({}),y=d(),A=d(!1),j=d(0),L=d(!1),K=d(!0),_=R(),z=p(()=>["top","bottom"].includes(l.props.tabPosition)),M=p(()=>z.value?"width":"height"),W=p(()=>({transform:`translate${"width"===M.value?"X":"Y"}(-${j.value}px)`})),{width:G,height:I}=P(f),{width:O,height:U}=P(m,{width:0,height:0},{box:"border-box"}),q=p(()=>z.value?G.value:I.value),H=p(()=>z.value?O.value:U.value),{onWheel:Z}=D({atStartEdge:p(()=>j.value<=0),atEndEdge:p(()=>H.value-j.value<=q.value),layout:p(()=>z.value?"horizontal":"vertical")},e=>{j.value=Y(j.value+e,0,H.value-q.value)}),J=()=>{if(!f.value)return;const e=f.value[`offset${Q(M.value)}`],a=j.value;if(!a)return;const t=a>e?a-e:0;j.value=t},ae=()=>{if(!f.value||!m.value)return;const e=m.value[`offset${Q(M.value)}`],a=f.value[`offset${Q(M.value)}`],t=j.value;if(e-t<=a)return;const l=e-t>2*a?t+a:e-a;j.value=l},te=async()=>{const a=m.value;if(!(A.value&&h.value&&f.value&&a))return;await u();const t=g.value[e.currentName];if(!t)return;const l=f.value,s=t.getBoundingClientRect(),n=l.getBoundingClientRect(),o=z.value?a.offsetWidth-n.width:a.offsetHeight-n.height,r=j.value;let i=r;z.value?(s.left<n.left&&(i=r-(n.left-s.left)),s.right>n.right&&(i=r+s.right-n.right)):(s.top<n.top&&(i=r-(n.top-s.top)),s.bottom>n.bottom&&(i=r+(s.bottom-n.bottom))),i=Math.max(i,0),j.value=Math.min(i,o)},se=()=>{var a;if(!m.value||!f.value)return;e.stretch&&(null==(a=y.value)||a.update());const t=m.value[`offset${Q(M.value)}`],l=f.value[`offset${Q(M.value)}`],s=j.value;l<t?(A.value=A.value||{},A.value.prev=s,A.value.next=s+l<t,t-s<l&&(j.value=t-l)):(A.value=!1,s>0&&(j.value=0))},oe=e=>{let a=0;switch(F(e)){case V.left:case V.up:a=-1;break;case V.right:case V.down:a=1;break;default:return}const t=Array.from(e.currentTarget.querySelectorAll("[role=tab]:not(.is-disabled)"));let l=t.indexOf(e.target)+a;l<0?l=t.length-1:l>=t.length&&(l=0),t[l].focus({preventScroll:!0}),t[l].click(),re()},re=()=>{K.value&&(L.value=!0)},ue=()=>L.value=!1;return r(c,e=>{"hidden"===e?K.value=!1:"visible"===e&&setTimeout(()=>K.value=!0,50)}),r(b,e=>{e?setTimeout(()=>K.value=!0,50):K.value=!1}),i(h,()=>{X(se)}),$(()=>setTimeout(()=>te(),0)),C(()=>se()),a({scrollToActiveTab:te,removeFocus:ue,focusActiveTab:async()=>{await u();const a=g.value[e.currentName];null==a||a.focus({preventScroll:!0})},tabListRef:m,tabBarRef:y,scheduleRender:()=>N(_)}),()=>{const a=A.value?[k("span",{class:[v.e("nav-prev"),v.is("disabled",!A.value.prev)],onClick:J},[k(E,null,{default:()=>[k(S,null,null)]})]),k("span",{class:[v.e("nav-next"),v.is("disabled",!A.value.next)],onClick:ae},[k(E,null,{default:()=>[k(T,null,null)]})])]:null,s=e.panes.map((a,s)=>{var n,o,r,u,i;const d=a.uid,c=a.props.disabled,b=null!=(o=null!=(n=a.props.name)?n:a.index)?o:`${s}`,p=!c&&(a.isClosable||!1!==a.props.closable&&e.editable);a.index=`${s}`;const f=p?k(E,{class:"is-icon-close",onClick:e=>t("tabRemove",a,e)},{default:()=>[k(B,null,null)]}):null,m=(null==(u=(r=a.slots).label)?void 0:u.call(r))||a.props.label,h=!c&&a.active?null!=(i=e.tabindex)?i:l.props.tabindex:-1;return k("div",{ref:e=>((e,a)=>{g.value[a]=e})(e,b),class:[v.e("item"),v.is(l.props.tabPosition),v.is("active",a.active),v.is("disabled",c),v.is("closable",p),v.is("focus",L.value)],id:`tab-${b}`,key:`tab-${d}`,"aria-controls":`pane-${b}`,role:"tab","aria-selected":a.active,tabindex:h,onFocus:()=>re(),onBlur:()=>ue(),onClick:e=>{ue(),t("tabClick",a,b,e)},onKeydown:e=>{const l=F(e);!p||l!==V.delete&&l!==V.backspace||t("tabRemove",a,e)}},[m,f])});return _.value,k("div",{ref:h,class:[v.e("nav-wrap"),v.is("scrollable",!!A.value),v.is(l.props.tabPosition)]},[a,k("div",{class:v.e("nav-scroll"),ref:f},[e.panes.length>0?k("div",{class:[v.e("nav"),v.is(l.props.tabPosition),v.is("stretch",e.stretch&&["top","bottom"].includes(l.props.tabPosition))],ref:m,style:W.value,role:"tablist",onKeydown:oe,onWheel:Z},[e.type?null:k(le,{ref:y,tabs:[...e.panes],tabRefs:g.value},null),s]):null])])}}}),re=e({type:{type:String,values:["card","border-card",""],default:""},closable:Boolean,addable:Boolean,modelValue:{type:[String,Number]},defaultValue:{type:[String,Number]},editable:Boolean,tabPosition:{type:String,values:["top","right","bottom","left"],default:"top"},beforeLeave:{type:t(Function),default:()=>!0},stretch:Boolean,tabindex:{type:[String,Number],default:0}}),ue=e=>A(e)||j(e),ie=l({name:"ElTabs",props:re,emits:{[z]:e=>ue(e),tabClick:(e,a)=>a instanceof Event,tabChange:e=>ue(e),edit:(e,a)=>["remove","add"].includes(a),tabRemove:e=>ue(e),tabAdd:()=>!0},setup(e,{emit:a,slots:t,expose:l}){var s;const n=o("tabs"),i=p(()=>["left","right"].includes(e.tabPosition)),{children:v,addChild:c,removeChild:b,ChildrenSorter:f}=J(M(),"ElTabPane"),m=d(),h=d(null!=(s=y(e.modelValue)?e.defaultValue:e.modelValue)?s:"0"),g=async(t,l=!1)=>{var s,n,o,r;if(h.value!==t&&!y(t))try{let u;if(e.beforeLeave){const a=e.beforeLeave(t,h.value);u=a instanceof Promise?await a:a}else u=!0;if(!1!==u){const e=null==(s=v.value.find(e=>e.paneName===h.value))?void 0:s.isFocusInsidePane();h.value=t,l&&(a(z,t),a("tabChange",t)),null==(o=null==(n=m.value)?void 0:n.removeFocus)||o.call(n),e&&(null==(r=m.value)||r.focusActiveTab())}}catch(u){}},x=(e,t,l)=>{e.props.disabled||(a("tabClick",e,l),g(t,!0))},w=(e,t)=>{e.props.disabled||y(e.props.name)||(t.stopPropagation(),a("edit",e.props.name,"remove"),a("tabRemove",e.props.name))},P=()=>{a("edit",void 0,"add"),a("tabAdd")},$=e=>{const a=F(e);[V.enter,V.numpadEnter].includes(a)&&P()},C=a=>{const t=a.el.firstChild,l=["bottom","right"].includes(e.tabPosition)?a.children[0].el:a.children[1].el;t!==l&&t.before(l)};return r(()=>e.modelValue,e=>g(e)),r(h,async()=>{var e;await u(),null==(e=m.value)||e.scrollToActiveTab()}),W(ee,{props:e,currentName:h,registerPane:c,unregisterPane:b,nav$:m}),l({currentName:h,get tabNavRef(){return L(m.value,["scheduleRender"])}}),()=>{const a=t["add-icon"],l=e.editable||e.addable?k("div",{class:[n.e("new-tab"),i.value&&n.e("new-tab-vertical")],tabindex:e.tabindex,onClick:P,onKeydown:$},[a?K(t,"add-icon"):k(E,{class:n.is("icon-plus")},{default:()=>[k(_,null,null)]})]):null,s=k("div",{class:[n.e("header"),i.value&&n.e("header-vertical"),n.is(e.tabPosition)]},[k(f,null,{default:()=>k(oe,{ref:m,currentName:h.value,editable:e.editable,type:e.type,panes:v.value,stretch:e.stretch,onTabClick:x,onTabRemove:w},null),$stable:!0}),l]),o=k("div",{class:n.e("content")},[K(t,"default")]);return k("div",{class:[n.b(),n.m(e.tabPosition),{[n.m("card")]:"card"===e.type,[n.m("border-card")]:"border-card"===e.type}],onVnodeMounted:C,onVnodeUpdated:C},[o,s])}}}),de=e({label:{type:String,default:""},name:{type:[String,Number]},closable:{type:Boolean,default:void 0},disabled:Boolean,lazy:Boolean}),ve=["id","aria-hidden","aria-labelledby"],ce="ElTabPane";var be=l({name:ce,__name:"tab-pane",props:de,setup(e){const a=e,t=M(),l=G(),u=s(ee);u||n(ce,"usage: <el-tabs><el-tab-pane /></el-tabs/>");const i=o("tab-pane"),m=d(),y=d(),x=p(()=>{var e;return null!=(e=a.closable)?e:u.props.closable}),w=p(()=>{var e;return u.currentName.value===(null!=(e=a.name)?e:y.value)}),P=d(w.value),$=p(()=>{var e;return null!=(e=a.name)?e:y.value}),C=p(()=>!a.lazy||P.value||w.value);r(w,e=>{e&&(P.value=!0)});const N=I({uid:t.uid,getVnode:()=>t.vnode,slots:l,props:a,paneName:$,active:w,index:y,isClosable:x,isFocusInsidePane:()=>{var e;return null==(e=m.value)?void 0:e.contains(document.activeElement)}});return u.registerPane(N),v(()=>{u.unregisterPane(N)}),O(()=>{var e;l.label&&(null==(e=u.nav$.value)||e.scheduleRender())}),(e,a)=>C.value?U((f(),c("div",{key:0,id:`pane-${$.value}`,ref_key:"paneRef",ref:m,class:h(g(i).b()),role:"tabpanel","aria-hidden":!w.value,"aria-labelledby":`tab-${$.value}`},[K(e.$slots,"default")],10,ve)),[[q,w.value]]):b("v-if",!0)}});const pe=H(ie,{TabPane:be}),fe=Z(be);export{fe as E,pe as a};
