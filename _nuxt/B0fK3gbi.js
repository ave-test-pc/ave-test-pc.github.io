import{_ as e,aw as t,br as l,qy as s,H as a,c as i,J as o,o as r,w as n,a as u,b as p,t as d,T as c,d as m,aJ as v,E as x,aa as f,a5 as h,a6 as b,L as g,S as y,F as _,a2 as w,bC as k,bB as j,D as C,at as S,bF as V,K as E,M as A,aU as M,aM as T,aT as R,aL as q,bq as U,P as I,oR as L,aP as D,qA as F}from"./C8zCCogY.js";import{u as P,a as B,b as W}from"./7sOixxdk.js";import{u as z}from"./BV-zpxQJ.js";import{b as $,c as J}from"./Dd3ONJ9K.js";import{u as N}from"./CiUNROgy.js";import{u as Y}from"./Bzhi185P.js";import"./BMCWR8qn.js";import"./g7vU-j5M.js";import"./B6Y1KpwL.js";import"./pAvqTbq1.js";import"./DUtGqHLY.js";import"./3zf6s2PU.js";import"./2xvRo4QC.js";import"./C2jnsTLj.js";import"./C535m_7q.js";import"./jvqJ-lss.js";import"./-d3z4qYr.js";import"./DHI12vUc.js";import"./Dwz_iTym.js";import"./Ch2kKm0h.js";import"./D9w_6Z7_.js";import"./BcLlRL1h.js";import"./BUe6lFiz.js";import"./DT8qK_3J.js";import"./CWfe8Pzr.js";import"./D8kwlDkA.js";import"./D-MmK6ns.js";import"./CiE6GnGM.js";import"./C-cIFx6x.js";import"./Cuadv0W5.js";import"./ffubJHUH.js";import"./jps9OSah.js";import"./cA_dvyYK.js";import"./DNd1VKJp.js";import"./BWc5ynOe.js";import"./WWWZ5U8g.js";import"./TbcHext3.js";/* empty css        */import"./CW8dp4Yv.js";import"./B94BTbhq.js";import"./CGiTXMzY.js";import"./P5kewj-g.js";const H={class:"color-[--third-text] text-12px mb-20px mt-4px"},K={key:1,class:"flex flex-col items-center pt-60px"},G={class:"color-[--third-text] text-12px mb-20px mt-4px"},O={key:2},Q={class:"color-[--third-text] text-12px mb-20px mt-4px"},X=["data-index"],Z={key:0,class:"border-1px border-solid border-[--dialog-divider] rounded-8px px-12px pt-16px ml-40px mb-16px"},ee=e({__name:"list",props:{isMine:{type:Boolean}},emits:["startAttention","endReached","stop"],setup(e,{emit:w}){const k=_(null),{t:j}=t(),C=w,S=e,V=l(),E=z(),A=P(x(()=>({count:E.list.length,getScrollElement:()=>k.value,estimateSize:()=>200,overscan:5,gap:16}))),M=x(()=>A.value.getVirtualItems()),T=x(()=>A.value.getTotalSize()),R=x(()=>0===E.list.length),q=e=>E.list[e.index]||{};return s(k,()=>{C("endReached")},{distance:100}),(e,t)=>{const l=c,s=v,x=f;return S.isMine&&!o(V).evmAddress?(r(),a(s,{key:0},{default:n(()=>[u("span",H,d(o(j)("noWalletTip")),1),p(l,{type:"primary",class:"text-12px w-266px h-40px",onClick:t[0]||(t[0]=e=>o(V).changeConnectVisible(!0))},{default:n(()=>[m(d(o(j)("connectBotWallet")),1)]),_:1})]),_:1})):S.isMine&&o(R)&&!o(E).query.token_keyword?(r(),i("div",K,[p(x,{name:"custom:twitter-empty",class:"text-61px mb-12px color-[--icon-color]"}),u("span",G,d(o(j)("twitterEmpty")),1),p(l,{type:"primary",class:"text-12px w-266px h-40px",onClick:t[1]||(t[1]=e=>C("startAttention"))},{default:n(()=>[m(d(o(j)("attention")),1)]),_:1})])):o(R)?(r(),i("div",O,[p(s,{class:"pt-40px"},{default:n(()=>[u("span",Q,d(o(j)("emptyNoData")),1)]),_:1})])):(r(),i("div",{key:3,ref_key:"parentRef",ref:k,class:"overflow-y-auto scrollbar-hide",style:{height:"calc(100% - 120px)"},onMouseenter:t[4]||(t[4]=e=>C("stop",!0)),onMouseleave:t[5]||(t[5]=e=>C("stop",!1))},[u("div",{style:g({height:`${o(T)}px`,width:"100%",position:"relative"})},[(r(!0),i(h,null,b(o(M),l=>(r(),i("div",{key:String(l.key),style:g({position:"absolute",top:0,left:0,width:"100%",transform:`translateY(${l.start}px)`})},[u("div",{ref_for:!0,ref:e=>o(A).measureElement(e),"data-index":l.index,class:"border-b-1px border-b-solid border-b-[--border]"},[p(B,{item:q(l),index:l.index,onMeasureElement:t[2]||(t[2]=t=>o(A).measureElement(e.el))},null,8,["item","index"]),["2","3","4"].includes(q(l).type)&&(q(l).retweeted_tweet||q(l).quoted_tweet||q(l).replied_tweet)?(r(),i("div",Z,[p(B,{item:q(l).retweeted_tweet||q(l).quoted_tweet||q(l).replied_tweet,index:-1,onMeasureElement:t[3]||(t[3]=t=>o(A).measureElement(e.el))},null,8,["item"])])):y("",!0)],8,X)],4))),128))],4)],544))}}},[["__scopeId","data-v-b413f3e7"]]),te={class:"flex items-center pb-14px border-b-1px border-b-solid border-b-[--border] mb-12px"},le={class:"flex justify-between items-center"},se={class:"flex items-center gap-12px"},ae={class:"flex justify-between mb-12px items-center"},ie={class:"flex items-center gap-16px"},oe=["onClick"],re={class:"flex items-center gap-8px color-[--secondary-text]"},ne={class:"pt-16px flex items-center"},ue={class:"el-scrollbar__view el-select-dropdown__list [&&]:m--12px"},pe=["onClick"],de={class:"text-12px"},ce=["src","volume"],me={__name:"trackerPop",emits:["setDrawerVisible"],setup(e,{emit:s}){const v=s,{t:g}=t(),P=z(),B=N(),H=w(),K=l(),G=_(1),O=_(!1),Q=_(!1),X=_(!1),Z=S([]),me=k("twitterAudio"),ve=j("twFollowIds",[]),xe=_({...P.query}),fe=1,he=2,be=x(()=>ve.value.map(e=>e.author_id)),ge=x(()=>[{label:g("hot2"),value:fe},{label:g("mine"),value:he}]),{arr:ye}=W(),_e=x(()=>G.value===he),we=_(xe.value.types.length===ye.value.length),ke=_(!1),je=()=>{xe.value.types=we.value?ye.value.map(e=>e.value):[],ke.value=xe.value.types.length>0&&xe.value.types.length<ye.value.length},Ce=e=>{const t=e.length;we.value=t===ye.value.length,ke.value=t>0&&t<ye.value.length},Se=()=>{xe.value.page_token="",P.finished=!1,P.list=[]},Ve=async()=>{const e=await J();ve.value=e.authors||[]};C(()=>K.accessToken,e=>{e&&_e.value&&(Se(),Me()),e&&Ve()}),K.accessToken&&Ve();const Ee=()=>{O.value=!1,Se(),P.query={...P.query,...xe.value},Me()},Ae=L(Ee,300),Me=async()=>{const e=G.value;if((!_e.value||K.accessToken)&&!P.loading&&!P.finished){P.loading=!0;try{const t=await $({...xe.value,follow_only:_e.value,types:xe.value.types.join(",")});if(t&&G.value===e){xe.value.page_token=t.page_token||"";const e=t.list||[];P.finished=!t.page_token,xe.value.page_token||P.finished?P.list=[...P.list,...e]:P.list=e}}catch(t){}finally{P.loading=!1}}},Te=L(Me,100);Me();return C(()=>X.value,e=>{e||(P.list.unshift(...Z.value),P.list=P.list.slice(0,100),Z.value=[])}),C(()=>B.wsResult[V.PUBLIC_TWITTER],async e=>{var t,l;if(xe.value.types.includes(+e.type)&&!xe.value.token_keyword){if(_e.value&&!be.value.includes(null==(t=e.author)?void 0:t.author_id))return;const s=P.list.findIndex(t=>t.tweet_id===e.tweet_id);if(e.follow_status=be.value.includes(null==(l=e.author)?void 0:l.author_id)?1:0,-1!==s)return void(P.list[s]=e);X.value?(Z.value.unshift(e),Z.value=Z.value.slice(0,100)):(P.list.unshift(e),P.list.length>100&&P.list.pop()),me.value&&H.audioSettings.audio.twitter&&me.value.play()}}),C(()=>be.value,()=>{_e.value&&(P.list=P.list.filter(e=>be.value.includes(e.author.author_id)))}),Y(()=>{P.list=[],xe.value.page_token="",Me()}),(e,t)=>{const l=f,s=M,x=R,_=c,w=q,k=D;return r(),i("div",{class:E(["w-full h-full bg-[--secondary-bg] p-12px",{"pr-16px":o(P).isLeftFixed,"pl-16px":o(P).isRightFixed}])},[p(l,{name:"custom:drag2",class:"absolute top-4px left-50% ml--6px text-6px bg-[--dialog-list-hover] drag-handle"}),u("div",te,[u("div",le,d(o(g)("twitterTracker")),1),t[10]||(t[10]=u("div",{class:"flex-1 drag-handle h-20px"},null,-1)),u("div",se,[o(K).evmAddress?(r(),a(l,{key:0,name:"custom:pump-setting",class:"color-[--secondary-text] hover:color-[--main-text] cursor-pointer text-14px",onClick:t[0]||(t[0]=e=>v("setDrawerVisible",!0))})):y("",!0),p(l,{name:"custom:close",class:"text-14px shrink-0 cursor-pointer color-[--main-text]",onClick:t[1]||(t[1]=e=>o(P).visible=!1)})])]),u("div",ae,[u("div",ie,[(r(!0),i(h,null,b(o(ge),e=>(r(),i("span",{key:e.value,class:E(["text-14px cursor-pointer",o(G)===e.value?"color-[--main-text]":"color-[--secondary-text]"]),onClick:t=>{return l=e.value,G.value=l,Se(),void Me();var l}},d(e.label),11,oe))),128)),u("div",re,[p(w,{visible:o(O),"onUpdate:visible":t[5]||(t[5]=e=>T(O)?O.value=e:null),placement:"bottom-end",trigger:"click",width:164,persistent:!1},{reference:n(()=>[p(l,{name:"custom:filter",class:"text-12px cursor-pointer"})]),default:n(()=>[p(s,{modelValue:o(we),"onUpdate:modelValue":t[2]||(t[2]=e=>T(we)?we.value=e:null),indeterminate:o(ke),class:"[--el-checkbox-height:16px] mb-12px",onChange:je},{default:n(()=>[m(d(o(g)("all")),1)]),_:1},8,["modelValue","indeterminate"]),p(x,{modelValue:o(xe).types,"onUpdate:modelValue":t[3]||(t[3]=e=>o(xe).types=e),class:"flex flex-col [--el-checkbox-height:16px] gap-12px",onChange:Ce},{default:n(()=>[(r(!0),i(h,null,b(o(ye),e=>(r(),a(s,{key:e.value,value:e.value},{default:n(()=>[m(d(e.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),u("div",ne,[p(_,{class:"min-w-0",onClick:t[4]||(t[4]=e=>O.value=!1)},{default:n(()=>[m(d(o(g)("cancel")),1)]),_:1}),p(_,{class:"min-w-0",type:"primary",onClick:Ee},{default:n(()=>[m(d(o(g)("confirm")),1)]),_:1})])]),_:1},8,["visible"]),p(w,{visible:o(Q),"onUpdate:visible":t[6]||(t[6]=e=>T(Q)?Q.value=e:null),trigger:"click","popper-class":"el-select__popper"},{reference:n(()=>[p(l,{class:"cursor-pointer",name:o(H).audioSettings.audio.twitter?"custom:ad":"custom:admute"},null,8,["name"])]),default:n(()=>[u("ul",ue,[(r(!0),i(h,null,b("audioList"in e?e.audioList:o(U),t=>(r(),i("li",{key:t,class:E(["el-select-dropdown__item hover:bg-[--border]",{"bg-[--border]":o(H).audioSettings.audio.twitter===t}]),onClick:e=>{o(H).audioSettings.audio.twitter=t,Q.value=!1}},[u("span",de,d(t||e.$t("close")),1)],10,pe))),128))])]),_:1},8,["visible"]),A(p(l,{name:"custom:stop"},null,512),[[I,o(X)]])])]),p(k,{modelValue:o(xe).token_keyword,"onUpdate:modelValue":t[7]||(t[7]=e=>o(xe).token_keyword=e),style:{"--el-input-bg-color":"var(--main-list-hover)","--el-input-height":"26px"},class:"w-160px",size:"small",clearable:"",placeholder:o(g)("searchCA"),onInput:o(Ae)},{prefix:n(()=>[p(l,{name:"custom:search"})]),_:1},8,["modelValue","placeholder","onInput"])]),p(ee,{isMine:o(_e),onStop:t[8]||(t[8]=e=>X.value=e),onEndReached:o(Te),onStartAttention:t[9]||(t[9]=e=>v("setDrawerVisible",!0))},null,8,["isMine","onEndReached"]),u("audio",{ref_key:"twitterAudio",ref:me,controls:"",style:{display:"none"},src:("getAudioUrl"in e?e.getAudioUrl:o(F))(o(H).audioSettings.audio.twitter),volume:+o(H).audioSettings.audio.volume/100||.5},null,8,ce)],2)}}};export{me as default};
