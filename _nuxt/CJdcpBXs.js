import{n as a,gg as e,aw as l,D as r,F as t,at as i,a7 as s,M as o,ff as n,c,o as d,b as p,a as m,w as u,J as f,t as g,E as b,d as y,a8 as v,K as x,S as h,aa as w,ap as P,T,H as k,aJ as _,qk as N,nS as S,aN as I}from"./C8zCCogY.js";import{E as D,a as L}from"./C-cIFx6x.js";import"./Dwz_iTym.js";import"./pAvqTbq1.js";import"./2xvRo4QC.js";const E=["infinite-scroll-disabled"],Y={class:"text-12px"},O={key:1},j={class:"text-14px"},M={key:0,class:"color-[--down-color]"},R={key:1,class:"color-[--up-color]"},H={key:0,class:"color-[--up-color]"},z={key:1},C={key:2,class:"color-[--down-color]"},U={key:3},A={class:"flex items-center justify-end gap-4px"},F={class:"mt-[2px] mb-[5px] py-[10px] text-[12px] text-center color-[--third-text]"},$={key:0},B=a({__name:"conditionOrder",props:{searchParams:{}},setup(a){const B=e(),{t:G}=l(),J=a,q=i(),K=t({loading:!1,finished:!1,error:!1}),Q=t(""),X={LAST_PRICE:G("latestPrice"),INDEX_PRICE:G("indexPrice")},V=b(()=>{var a,e,l;const r=(null==(l=null==(e=null==(a=B.metadata)?void 0:a.contractList)?void 0:e.reduce)?void 0:l.call(e,(a,e)=>(a[e.contractId]=e.contractName,a),{}))||{};return r.ALL=G("all"),r}),W=async()=>{if(K.value.loading||K.value.finished)return;const a={filterStatusList:"UNTRIGGERED",...J.searchParams};Q.value&&(a.offsetData=Q.value);try{K.value.loading=!0;const e=await N(a);let l=(a=>{var e;return(null==(e=null==a?void 0:a.map)?void 0:e.call(a,a=>{const e="SELL"===a.side,l=a.type.includes("PROFIT");let r="";return r=e?l?"≥":"≤":l?"≤":"≥",{...a,triggerSign:r}}))||[]})(e.dataList);Q.value&&(l=q.value.concat(l)),e.nextPageOffsetData||(K.value.finished=!0),Q.value=e.nextPageOffsetData,q.value=l}catch(e){K.value.error=!0}finally{K.value.loading=!1}};W();return r(()=>J.searchParams,()=>{Q.value="",q.value=[],K.value.finished=!1,K.value.error=!1,K.value.loading=!1,W()}),(a,e)=>{const l=_,r=D,t=w,i=T,b=L,N=s("copy"),B=n;return o((d(),c("div",{class:"relative min-h-400px bg-[--secondary-bg]","infinite-scroll-delay":200,"infinite-scroll-disabled":f(K).loading||f(K).finished||f(K).error,"infinite-scroll-immediate":!1,"infinite-scroll-distance":300},[p(b,{fit:"",data:f(q),"header-row-class-name":"text-12px sticky top-0 z-10 font-500","cell-class-name":"color-[--main-text] text-12px"},{empty:u(()=>{var e;return[f(K).loading||0!==(null==(e=f(q))?void 0:e.length)?(d(),c("span",O)):(d(),k(l,{key:0,class:"pt-[40px]"},{default:u(()=>[m("span",Y,g(a.$t("emptyNoData")),1)]),_:1}))]}),default:u(()=>[p(r,{label:f(G)("markets1"),prop:"contractId"},{default:u(({row:a})=>[m("span",j,g(f(V)[a.contractId]),1)]),_:1},8,["label"]),p(r,{width:100,label:f(G)("Qty"),prop:"size"},{default:u(({row:e})=>[y(g(("formatNumber"in a?a.formatNumber:f(v))(e.size,10))+" "+g(f(V)[e.contractId].replace("USD","")),1)]),_:1},8,["label"]),p(r,{"min-width":100,align:"right",label:f(G)("price"),prop:"price"},{default:u(({row:e})=>[y(g(e.type.includes("LIMIT")?("formatNumber"in a?a.formatNumber:f(v))(e.price,{decimals:10,limit:20}):f(G)("market")),1)]),_:1},8,["label"]),p(r,{align:"right",label:f(G)("triggerPrice"),prop:"triggerPrice"},{default:u(({row:e})=>[y(g(e.triggerSign)+g(("formatNumber"in a?a.formatNumber:f(v))(e.triggerPrice,{limit:20,decimals:10}))+" "+g(X[e.triggerPriceType]),1)]),_:1},8,["label"]),p(r,{"min-width":100,align:"right",label:f(G)("tradeType"),prop:"tradeType"},{default:u(({row:a})=>[m("span",{class:x("BUY"===a.side?"color-[--up-color]":"color-[--down-color]")},g("BUY"===a.side?f(G)("buy"):f(G)("sell")),3)]),_:1},8,["label"]),p(r,{"min-width":100,align:"right",label:f(G)("orderType"),prop:"orderType"},{default:u(({row:e})=>[e.type.includes("STOP")?(d(),c("span",M,g(a.$t("stopLoss")),1)):e.type.includes("PROFIT")?(d(),c("span",R,g(a.$t("takeProfit")),1)):h("",!0)]),_:1},8,["label"]),p(r,{align:"right",label:f(G)("takeProfitStopLoss"),prop:"takeProfitStopLoss"},{default:u(({row:l})=>[l.openTp.triggerPrice?(d(),c("span",H,g(("formatNumber"in a?a.formatNumber:f(v))(l.openTp.triggerPrice,{limit:20,decimals:10})),1)):(d(),c("span",z,"--")),e[0]||(e[0]=m("span",{class:"color-[--icon-color] mx-4px"},"/",-1)),l.openSl.triggerPrice?(d(),c("span",C,g(("formatNumber"in a?a.formatNumber:f(v))(l.openSl.triggerPrice,{limit:20,decimals:10})),1)):(d(),c("span",U,"--"))]),_:1},8,["label"]),p(r,{align:"right",label:f(G)("orderId"),prop:"id"},{default:u(({row:a})=>[m("div",A,[y(g(a.id.slice(0,4))+"..."+g(a.id.slice(-4))+" ",1),o(p(t,{name:"bxs:copy",class:"color-[#5A5E64]"},null,512),[[N,a.id]])])]),_:1},8,["label"]),p(r,{align:"right",label:f(G)("orderTime"),prop:"createdTime"},{default:u(({row:a})=>[y(g(f(P)(Number(a.createdTime)).format("YYYY-MM-DD HH:mm:ss")),1)]),_:1},8,["label"]),p(r,{align:"right",label:f(G)("validityPeriod"),prop:"l2ExpireTime"},{default:u(({row:a})=>[y(g(f(P)(Number(a.l2ExpireTime)).format("YYYY-MM-DD HH:mm:ss")),1)]),_:1},8,["label"]),p(r,{"min-width":60,align:"right",label:f(G)("operation"),prop:"operate"},{default:u(({row:a})=>[p(i,{size:"small",style:{"--el-button-active-border-color":"transparent"},onClick:e=>(async a=>{await S([a]),W(),I.success(G("cancelledOrderSuccessfully"))})(a.id)},{default:u(()=>[y(g(f(G)("cancel")),1)]),_:1},8,["onClick"])]),_:1},8,["label"])]),_:1},8,["data"]),m("div",F,[f(K).loading&&f(Q)?(d(),c("span",$,g(f(G)("loading")),1)):h("",!0)])],8,E)),[[B,W]])}}});export{B as default};
