import{n as e,a3 as a,a2 as t,br as s,aw as l,F as o,c as r,S as n,J as i,o as c,M as d,P as u,a as p,b as v,t as m,aa as f,a5 as x,a6 as g,H as y,R as h,aP as k,T as w,ak as b,w as C,d as $,aN as _,E as A,G as T,gv as I,_ as P}from"./C8zCCogY.js";import{d as S}from"./cC-N3AwG.js";const U={class:"tabs"},z={class:"text-14px color-[--main-text]"},B={class:"text-12px color-[--third-text] mt-8px"},D={class:"import part mt-24px"},E={class:"text-12px color-[--secondary-text] mb-10px block"},V={class:"grid grid-cols-3 gap-2"},j={class:"error-message"},H={key:0},K={class:"flex-between"},L=P(e({__name:"import",emits:["refresh"],setup(e,{emit:P}){const L=P,{showImport:R}=a(t()),W=s(),{t:Z}=l(),F=o(!1),G=o(Array(12).fill("")),J=o([]),M=o(""),N=A(()=>G.value.join(" ").trim());const q=()=>{var e;if(G.value.some(e=>!e.trim()))return void(M.value=Z("importTip1eTips2"));F.value=!0;const a=(null==(e=null==W?void 0:W.userInfo)?void 0:e.tgUid)||"",t=function(e,a){const t=I.enc.Base64.stringify(I.enc.Utf8.parse(e)),s=I.SHA256(a),l=I.lib.WordArray.create(s.words.slice(0,4));return I.AES.encrypt(t,s,{mode:I.mode.CBC,iv:l,padding:I.pad.Pkcs7}).ciphertext.toString(I.enc.Base64)}(N.value,a);S(t).then(e=>{_.success(Z("success")),L("refresh"),R.value=!1,O()}).catch(e=>{_.error(String(e))}).finally(()=>{F.value=!1})};function O(){G.value=Array(12).fill(""),M.value=""}return(e,a)=>{const t=f,s=k,l=w;return i(R)?(c(),r("div",{key:0,class:"pop-right",onClick:a[2]||(a[2]=e=>R.value=!1)},[d(p("div",{class:"content",style:{flex:"1","max-width":"450px","overflow-y":"auto","overflow-x":"hidden"},onClick:a[1]||(a[1]=b(()=>{},["stop","prevent"]))},[p("div",U,[p("div",null,m(e.$t("importWallet")),1),v(t,{name:"line-md:close",class:"text-20px color-[--main-text]",onClick:a[0]||(a[0]=e=>R.value=!1)})]),p("div",null,[p("span",z,m(e.$t("allChain"))+" "+m(e.$t("automaticRecognition")),1),p("div",B,m(e.$t("importBotTip")),1)]),p("div",D,[p("span",E,m(e.$t("mnemonic")),1),p("div",V,[(c(!0),r(x,null,g(i(G),(e,a)=>(c(),y(s,{ref_for:!0,ref_key:"inputs",ref:J,key:a,modelValue:i(G)[a],"onUpdate:modelValue":e=>i(G)[a]=e,class:"input",placeholder:`${a+1}`,onInput:e=>((e,a)=>{let t=e.replace(/[^a-zA-Z]/g,"").toLowerCase();G.value[a]=t,e=t,12==(null==G?void 0:G.value.length)&&(M.value="")})(e,a),onKeydown:h(e=>{return s=a,void(" "!==(t=e).key&&"Enter"!==(null==t?void 0:t.key)||(t.preventDefault(),T(()=>{var e;return null==(e=J.value[s+1])?void 0:e.focus()})));var t,s},["enter"]),onPaste:e=>(e=>{var a,t,s;const l=null==(t=null==(a=e.clipboardData.getData("text"))?void 0:a.trim())?void 0:t.toLowerCase(),o=null==(s=null==l?void 0:l.replace(/\s+/g," "))?void 0:s.split(" ");12==(null==o?void 0:o.length)&&(e.preventDefault(),/^[a-zA-Z\s]+$/.test(l)?o.forEach((e,a)=>{G.value[a]=e}):_.error(Z("importTip1eTips")))})(e)},null,8,["modelValue","onUpdate:modelValue","placeholder","onInput","onKeydown","onPaste"]))),128))]),p("div",j,[i(M)?(c(),r("span",H,m(i(M)),1)):n("",!0)]),p("div",K,[v(l,{class:"width100 button",size:"small",onClick:b(O,["stop","prevent"])},{default:C(()=>[$(m(e.$t("reset")),1)]),_:1}),v(l,{class:"width100 button",block:"",size:"small",type:"primary",loading:i(F),onClick:b(q,["stop"])},{default:C(()=>[$(m(e.$t("confirm")),1)]),_:1},8,["loading"])])])],512),[[u,i(R)]])])):n("",!0)}}}),[["__scopeId","data-v-d7ab7786"]]);export{L as default};
